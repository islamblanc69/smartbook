<script>
    // Ù…Ø¹Ø±Ù Ø§Ù„Ø³ÙˆØ±Ø© Ø§Ù„Ø­Ø§Ù„ÙŠ
    const surahId = 'masad';

    // ÙØ­Øµ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    function checkProgress() {
        const isFinished = localStorage.getItem('finish_' + surahId);
        if (isFinished === 'true') {
            updateBtnStyle(true);
        }
    }

    // Ø§Ù„ÙˆØ¸ÙŠÙØ© Ø§Ù„Ù…Ø·ÙˆØ±Ø©: ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø§Ù„Ø© (Toggle)
    function markAsFinished() {
        const isCurrentlyFinished = localStorage.getItem('finish_' + surahId) === 'true';

        if (!isCurrentlyFinished) {
            // Ø­Ø§Ù„Ø© Ø§Ù„Ø­ÙØ¸ (ØªÙØ¹ÙŠÙ„)
            localStorage.setItem('finish_' + surahId, 'true');
            updateBtnStyle(true);
            confetti({ 
                particleCount: 200, 
                spread: 80, 
                origin: { y: 0.8 },
                colors: ['#c5a059', '#1a3a5f', '#27ae60']
            });
        } else {
            // Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ù„ØºØ§Ø¡ (Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¨Ø¯Ø¡)
            localStorage.removeItem('finish_' + surahId);
            updateBtnStyle(false);
        }
    }

    // ØªØ­Ø¯ÙŠØ« Ø´ÙƒÙ„ Ø§Ù„Ø²Ø± Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø§Ù„Ø©
    function updateBtnStyle(finished) {
        const btn = document.getElementById('finishBtn');
        if (finished) {
            btn.innerHTML = "ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­ âœ… (Ø§Ø¶ØºØ· Ù„Ù„Ø¥Ù„ØºØ§Ø¡)";
            btn.classList.add('is-finished');
        } else {
            btn.innerHTML = "Ù„Ù‚Ø¯ Ø£Ù†Ù‡ÙŠØª Ø§Ù„Ø³ÙˆØ±Ø©! ğŸŠ";
            btn.classList.remove('is-finished');
        }
    }
</script>
